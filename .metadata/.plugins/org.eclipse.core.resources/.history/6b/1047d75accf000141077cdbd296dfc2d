package rezervacije;

import java.io.IOException;
import java.util.ArrayList;

import javax.faces.bean.ManagedBean;
import javax.faces.bean.SessionScoped;
import javax.persistence.*;
import javax.servlet.http.Part;

import beani.Miza;

@ManagedBean(name = "rezervacijaMize")
@SessionScoped
public class RezervacijaMize {

	private Part file;
	private Miza miza = new Miza();
	private ArrayList<Miza> najdeneMize = new ArrayList<Miza>();
	
	
	
	
	public void shrani() throws IOException{
		file.write("C:/Users/Jure/Documents/GitHub/BHHG-hotel/RIS_Projekt/WebContent/RezervacijeSlike"+getFilename(file));
		String potSlike = "/RIS_Projekt/WebContent/Rezervacije/Slike"+getFilename(file);
		
	}
	
	public ArrayList<Miza> najdi(Miza m){
		
		return najdeneMize;
	}
	
	public boolean zasedenost(Miza m){
		return m.isZasedena();
	}
	
	private static String getFilename(Part part){
		for(String cd : part.getHeader("content-disposition").split(";")){
			if(cd.trim().startsWith("filename")){
				String filename = cd.substring(cd.indexOf('=')+1).trim().replace("\"","");
				System.out.println("returna?");
				return filename.substring(filename.lastIndexOf('/')+1).substring(filename.lastIndexOf('\\')+1);
				
			}
		}return null;
	}
	
	

	public Miza getMiza() {
		return miza;
	}

	public void setMiza(Miza miza) {
		this.miza = miza;
	}

	public ArrayList<Miza> getNajdeneMize() {
		return najdeneMize;
	}

	public void setNajdeneMize(ArrayList<Miza> najdeneMize) {
		this.najdeneMize = najdeneMize;
	}

	public Part getFile() {
		return file;
	}

	public void setFile(Part file) {
		this.file = file;
	}

	
	
	
	
}
